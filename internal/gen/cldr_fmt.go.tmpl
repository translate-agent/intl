package intl

// Code generated by "earthly +generate". DO NOT EDIT.

import (
  "cmp"
  "strings"
  "time"

  "golang.org/x/text/language"
)

func defaultNumberingSystem(locale language.Tag) numberingSystem {
  s := locale.String()

  switch {
  default:
    return numberingSystemLatn
{{- range $system, $locales := .DefaultNumberingSystems }}
  case
  {{- range $i, $locale := $locales }}
    {{- if ne $locale "latn" }} s == "{{ $locale }}", strings.HasPrefix(s, "{{ $locale }}-"){{ if lt $i (sub (len $locales) 1) }},
{{ end }}
    {{- end }}
  {{- end }}:
    return numberingSystem{{ title $system }}
{{- end }}
  }
}

func defaultCalendar(locale language.Tag) calendarType {
  switch v, _ := locale.Region(); v.String() {
  default:
    return calendarTypeGregorian
{{- range $v := .CalendarPreferences }}
  {{- if ne (index $v.Calendars 0) "gregorian" }}
  case "{{ join $v.Regions "\", \"" }}":
    return calendarType{{ title (index $v.Calendars 0) }}
  {{- end }}
{{- end }}
  }
}

{{ range $calendarType, $formats := .DateTimeFormats }}
func fmtYear{{ title $calendarType }}(locale language.Tag) func(v string) string {
  lang, _ := locale.Base()

  switch lang.String() {
  default:
    return func(v string) string { return {{ $formats.Y.Default }} }
{{- range $fmt := sortKeys $formats.Y.Fmt }}
{{- $languages := index $formats.Y.Fmt $fmt }}
  case "{{ join $languages "\", \"" }}":
    return func (v string) string { return {{ $fmt }} }
{{- end }}
  }
}

func fmtYearMonth{{ title $calendarType}}(locale language.Tag, digits digits, opts Options) func(y int, m time.Month) string {
  fmtYear := fmtYear(digits)
  fmtMonth := fmtMonth(digits)

  switch language, _ := locale.Base(); language.String() {
  default:
    return func(y int, m time.Month) string { {{ $formats.YM.Default }} }
{{- range $fmt := sortKeys $formats.YM.Fmt }}
{{- $languages := index $formats.YM.Fmt $fmt }}
  case "{{ join $languages "\", \"" }}":
    return func(y int, m time.Month) string { {{ $fmt }} }
{{- end }}
  }
}

{{ if gt (len $formats.M.Fmt) 0 }}
func fmtMonth{{ title $calendarType }}(locale language.Tag, digits digits) func(v time.Month, opt Month) string {
  lang, _ := locale.Base()
{{ else }}
func fmtMonth{{ title $calendarType }}(_ language.Tag, digits digits) func(v time.Month, opt Month) string {
{{ end }}
{{ if eq (len $formats.M.Fmt) 0 }}
  return fmtMonth(digits)
{{ else }}
  switch lang.String() {
  default:
    return fmtMonth(digits)
  {{- range $fmt := sortKeys $formats.M.Fmt }}
  {{- $languages := index $formats.M.Fmt $fmt }}
  case "{{ join $languages "\", \"" }}":
    {{ $fmt }}
  {{- end }}
  }
{{ end }} {{/* $formats.M.Fmt > 1*/}}
}

func fmtMonthDay{{ title $calendarType}}(locale language.Tag, digits digits, opts Options) func (m time.Month, d int) string {
  lang, _ := locale.Base()

  fmtMonth := fmtMonth(digits)
  fmtDay := fmtDay(digits)

  switch lang.String() {
  default:
    {{ $formats.MD.Default }}
  {{- range $fmt := sortKeys $formats.MD.Fmt }}
  {{- $languages := index $formats.MD.Fmt $fmt }}
  case "{{ join $languages "\", \"" }}":
    {{ $fmt }}
  {{- end }}
  }
}

{{ if gt (len $formats.D.Fmt) 0 }}
func fmtDay{{ title $calendarType }}(locale language.Tag, digits digits) func(v int, opt Day) string {
  lang, _ := locale.Base()
{{ else }}
func fmtDay{{ title $calendarType }}(_ language.Tag, digits digits) func(v int, opt Day) string {
{{ end }}
  fmt := fmtDay(digits)
{{ if eq (len $formats.D.Fmt) 0 }}
  return fmt
{{ else }}
  switch lang.String() {
  default:
    return fmt
  {{- range $fmt := sortKeys $formats.D.Fmt }}
  {{- $languages := index $formats.D.Fmt $fmt }}
  case "{{ join $languages "\", \"" }}":
    return func(v int, opt Day) string { return {{ $fmt }} }
  {{- end }}
  }
{{ end }} {{/* $formats.D.Fmt > 1*/}}
}
{{ end }} {{/* $calendarType, $formats */}}
